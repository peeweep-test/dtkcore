pullrequest_check_build:
  steps:
    - link_package:
        source_project: deepin:test:OBSTEST:SRC
        source_package: dtkcore
        target_project: deepin:test:OBSTEST:CI
    - configure_repositories:
        project: deepin:test:OBSTEST:CI
        repositories:
          - name: Deepin_20
            paths:
              - target_project: deepin:test:SRC
                target_repository: Deepin_20
            architectures:
              - x86_64
  filters:
    event: pull_request

rebuild_tag:
  steps:
    - trigger_services:
        project: deepin:test:OBSTEST:TAG
        package: dtkcore
  filters:
    event: tag_push

rebuild_push:
  steps:
    - trigger_services:
        project: deepin:test:OBSTEST:SRC
        package: dtkcore
  filters:
    event: push
